# 기본 스레드 풀 사용
fast-dispatcher {
	type = Dispatcher
	throughput = 1000
}

# 기본 스레드 풀 사용
slow-dispatcher {
	type = Dispatcher
	throughput = 10
}

# 기본 스레드 풀 사용
custom-dispatcher {
	type = Dispatcher
	throughput = 10
}

# TPL 사용
custom-task-dispatcher {
	type = TaskDispatcher
	throughput = 10
}

# 스레드풀 사용전략 직접 지정
custom-fork-join-dispatcher {
	type = ForkJoinDispatcher
	throughput = 100
	dedicated-thread-pool {
		thread-count = 3
		deadlock-timeout = 3s
		threadtype = background
	}
}

akka {
	loggers = ["Akka.Logger.NLog.NLogLogger, Akka.Logger.NLog"]
	loglevel = info	

	remote {
		log-remote-lifecycle-events = info
        dot-netty.tcp {
            port = $akkaport
			hostname = $akkaip
		}
    }

	actor {
		provider = cluster
		deployment {
			/cluster-roundrobin {
				router = round-robin-pool # routing strategy
				#routees.paths = ["/user/clustermsg"]
				nr-of-instances = 500 # max number of total routees
				cluster {
					enabled = on
					allow-local-routees = on
					use-role = akkanet
					max-nr-of-instances-per-node = 100
				}
			}
			/printer-pool {
				router = round-robin-pool
				nr-of-instances = 5
			}

			/highpass-gate-pool {
				router = round-robin-pool
				nr-of-instances = 100
			}

			/cashpass-gate-pool {
				router = smallest-mailbox-pool
				nr-of-instances = 10
			}
		}
	}

	cluster {
        seed-nodes = ["$akkaseed"] # address of seed node
        roles = ["$roles"] # roles this member is in
        auto-down-unreachable-after = 300s
		debug {
			verbose-heartbeat-logging = off
			verbose-receive-gossip-logging = off
		} 
    }

	cluster.singleton {
	  # The actor name of the child singleton actor.
	  singleton-name = "singleton"
	  # Singleton among the nodes tagged with specified role.
	  # If the role is not specified it's a singleton among all nodes in the cluster.
	  role = ""
	  # When a node is becoming oldest it sends hand-over request to previous oldest, 
	  # that might be leaving the cluster. This is retried with this interval until 
	  # the previous oldest confirms that the hand over has started or the previous 
	  # oldest member is removed from the cluster (+ akka.cluster.down-removal-margin).
	  hand-over-retry-interval = 1s
	  # The number of retries are derived from hand-over-retry-interval and
	  # akka.cluster.down-removal-margin (or ClusterSingletonManagerSettings.RemovalMargin),
	  # but it will never be less than this property.
	  min-number-of-hand-over-retries = 10
	}

}
